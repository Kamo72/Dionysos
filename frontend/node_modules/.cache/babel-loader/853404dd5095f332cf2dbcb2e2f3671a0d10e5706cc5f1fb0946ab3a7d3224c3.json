{"ast":null,"code":"import React from'react';import{ApiLibrary}from'../../Library';import'./ViewPage.css';import{useParams}from'react-router-dom';import{serverRoot}from'../../App.js';import{webRoot}from'../../App.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function withParams(Component){return props=>/*#__PURE__*/_jsx(Component,{...props,params:useParams()});}class ViewPage extends React.Component{constructor(props){super(props);this.UploadFile=()=>{fetch(\"\".concat(serverRoot,\"/api/video/viewed/\").concat(this.state.videoCode),{method:'POST',body:null});};this.state={windowSize:[window.innerWidth,window.innerHeight],videoCode:null,vidName:\"---\",vidImg:\"https://static0.gamerantimages.com/wordpress/wp-content/uploads/2024/02/helldivers-2-review.jpg\",chId:null,chName:\"---\",chImg:\"https://i.pinimg.com/564x/d5/b0/4c/d5b04cc3dcd8c17702549ebc5f1acf1a.jpg\",views:\"---\",vidFile:null,chSubs:0,isLoading:true};this.state={...this.state,videoCode:props.params.id};const handleResize=()=>{this.setState(current=>{return{windowSize:[window.innerWidth,window.innerHeight]};});};window.addEventListener(\"resize\",handleResize);}async componentDidMount(){const apiLibrary=new ApiLibrary();const data=await apiLibrary.GetViewData(this.state.videoCode);this.setState(current=>{return{vidName:data.vidName};});this.setState(current=>{return{vidImg:data.vidImg};});this.setState(current=>{return{chId:data.chId};});this.setState(current=>{return{chName:data.chName};});this.setState(current=>{return{chImg:data.chImg};});this.setState(current=>{return{views:data.views};});this.setState(current=>{return{vidFile:data.vidFile};});this.setState(current=>{return{chSubs:data.chSubs};});this.setState(current=>{return{isLoading:false};});this.UploadFile();}render(){let[boxWidth,boxHeight]=this.state.windowSize;boxHeight-=100+22;if(boxWidth>boxHeight*16/9)boxWidth=boxHeight*16/9;else boxHeight=boxWidth/16*9;return/*#__PURE__*/_jsxs(\"div\",{className:\"ViewPage\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"VideoZone\",style:{width:window.innerWidth,height:boxHeight},children:/*#__PURE__*/_jsx(\"video\",{className:\"Video\",controls:true,autoPlay:true,poster:\"\".concat(serverRoot,\"/api/vidImg/\").concat(this.state.vidImg),src:\"\".concat(serverRoot,\"/api/vidFile/\").concat(this.state.vidFile),style:{zIndex:10,width:boxWidth,height:boxHeight,marginLeft:(window.innerWidth-boxWidth)/2.0}})}),/*#__PURE__*/_jsx(\"p\",{className:\"Title\",children:this.state.vidName}),/*#__PURE__*/_jsxs(\"div\",{className:\"Channel\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"ChannelIcon\",style:{backgroundColor:\"darkslategray\"},onClick:()=>{window.location.replace(\"\".concat(webRoot,\"/channel/\").concat(this.state.chId));},src:this.state.chImg==null?\"https://i.pinimg.com/564x/d5/b0/4c/d5b04cc3dcd8c17702549ebc5f1acf1a.jpg\":\"\".concat(serverRoot,\"/api/chImg/\").concat(this.state.chImg)}),/*#__PURE__*/_jsxs(\"div\",{className:\"ChannelDescripts\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"ChannelName\",onClick:()=>{window.location.replace(\"\".concat(webRoot,\"/channel/\").concat(this.state.chId));},children:this.state.chName}),/*#__PURE__*/_jsxs(\"p\",{className:\"ChannelSubs\",children:[\"Subs : \",this.state.chSubs]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"ChannelSubs\",children:[\"views : \",this.state.views]})]})]});}}export default withParams(ViewPage);","map":{"version":3,"names":["React","ApiLibrary","useParams","serverRoot","webRoot","jsx","_jsx","jsxs","_jsxs","withParams","Component","props","params","ViewPage","constructor","UploadFile","fetch","concat","state","videoCode","method","body","windowSize","window","innerWidth","innerHeight","vidName","vidImg","chId","chName","chImg","views","vidFile","chSubs","isLoading","id","handleResize","setState","current","addEventListener","componentDidMount","apiLibrary","data","GetViewData","render","boxWidth","boxHeight","className","children","style","width","height","controls","autoPlay","poster","src","zIndex","marginLeft","backgroundColor","onClick","location","replace"],"sources":["F:/[STS4 Storage]/Dionysos/frontend/src/Modules/Pages/ViewPage.js"],"sourcesContent":["import React from 'react';\r\nimport {ApiLibrary} from '../../Library';\r\nimport './ViewPage.css'\r\nimport { useParams } from 'react-router-dom';\r\nimport { serverRoot } from '../../App.js'\r\nimport { webRoot } from '../../App.js';\r\n\r\nfunction withParams(Component)\r\n{\r\n    return (props) => <Component{...props} params={useParams()}/>;\r\n}\r\n\r\nclass ViewPage extends React.Component\r\n{\r\n    UploadFile = () => \r\n    {\r\n        fetch(`${serverRoot}/api/video/viewed/${this.state.videoCode}`, {\r\n            method: 'POST',\r\n            body: null\r\n        })\r\n    }\r\n\r\n\r\n\r\n    constructor(props)\r\n    {\r\n        super(props)\r\n\r\n        this.state = {\r\n            ...this.state,\r\n            videoCode: props.params.id\r\n        };\r\n\r\n        const handleResize = () => {\r\n            this.setState(\r\n                current => {return {windowSize : [window.innerWidth, window.innerHeight]}} \r\n            )\r\n        }\r\n        window.addEventListener(\"resize\", handleResize);\r\n        \r\n    }\r\n\r\n    async componentDidMount() {\r\n        const apiLibrary = new ApiLibrary();\r\n        const data = await apiLibrary.GetViewData(this.state.videoCode);\r\n\r\n        this.setState(current => {return {vidName : data.vidName}});\r\n        this.setState(current => {return {vidImg : data.vidImg}});\r\n        this.setState(current => {return {chId : data.chId}});\r\n        this.setState(current => {return {chName : data.chName}});\r\n        this.setState(current => {return {chImg : data.chImg}});\r\n        this.setState(current => {return {views : data.views}});\r\n\r\n        this.setState(current => {return {vidFile : data.vidFile}});\r\n        this.setState(current => {return {chSubs : data.chSubs}});\r\n\r\n        this.setState(current => {return {isLoading : false}});\r\n\r\n        this.UploadFile();\r\n    }\r\n\r\n    state = \r\n    {\r\n        windowSize : [window.innerWidth, window.innerHeight],\r\n        videoCode : null,\r\n\r\n        vidName : \"---\",\r\n        vidImg : \"https://static0.gamerantimages.com/wordpress/wp-content/uploads/2024/02/helldivers-2-review.jpg\",\r\n        chId : null,\r\n        chName : \"---\",\r\n        chImg : \"https://i.pinimg.com/564x/d5/b0/4c/d5b04cc3dcd8c17702549ebc5f1acf1a.jpg\",\r\n        views : \"---\",\r\n\r\n        vidFile : null,\r\n        chSubs : 0,\r\n\r\n        isLoading : true,\r\n    }\r\n\r\n    render()\r\n    {\r\n        let [boxWidth, boxHeight] = this.state.windowSize\r\n\r\n        boxHeight -= 100 + 22\r\n\r\n        if(boxWidth > boxHeight * 16 / 9)\r\n            boxWidth = boxHeight * 16 / 9\r\n        else\r\n            boxHeight = boxWidth / 16 * 9\r\n\r\n        return(<div className='ViewPage'>\r\n            <div className='VideoZone'\r\n                style={{\r\n                    width : window.innerWidth,\r\n                    height : boxHeight,\r\n                }}>\r\n                <video className='Video' controls autoPlay\r\n                    poster={`${serverRoot}/api/vidImg/${this.state.vidImg}`}\r\n                    src={`${serverRoot}/api/vidFile/${this.state.vidFile}`}\r\n                    style={{\r\n                        zIndex : 10,\r\n                        width : boxWidth,\r\n                        height : boxHeight,\r\n                        marginLeft : (window.innerWidth-boxWidth) / 2.0\r\n                    }}\r\n                    >\r\n                </video>\r\n            </div>\r\n            <p className = \"Title\">{this.state.vidName}</p>\r\n            <div className='Channel'>\r\n                <img className = \"ChannelIcon\"\r\n                    style={{\r\n                        backgroundColor : \"darkslategray\"\r\n                    }}\r\n                    onClick={()=>{ window.location.replace(`${webRoot}/channel/${this.state.chId}`) }}\r\n                    src={this.state.chImg == null?\r\n                        \"https://i.pinimg.com/564x/d5/b0/4c/d5b04cc3dcd8c17702549ebc5f1acf1a.jpg\": \r\n                        `${serverRoot}/api/chImg/${this.state.chImg}`}\r\n                ></img>\r\n\r\n                <div className = \"ChannelDescripts\">\r\n                    <p className = \"ChannelName\"\r\n                        onClick={()=>{ window.location.replace(`${webRoot}/channel/${this.state.chId}`) }}\r\n                    >{this.state.chName}</p>\r\n                    <p className = \"ChannelSubs\">Subs : {this.state.chSubs}</p>\r\n                </div>\r\n                <p className = \"ChannelSubs\">views : {this.state.views}</p>\r\n                    \r\n            </div>\r\n\r\n        </div>)\r\n\r\n    }\r\n}\r\n\r\nexport default withParams(ViewPage);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}